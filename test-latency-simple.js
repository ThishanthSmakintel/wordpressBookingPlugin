// EASIEST LATENCY TEST - Copy this ONE line into browser console:
(async()=>{const m=[];const t=async(n,f)=>{const s=performance.now();try{await f();const d=performance.now()-s;m.push({n,d});console.log(`${d<10?'ðŸŸ¢':d<50?'ðŸŸ¡':'ðŸ”´'} ${n}: ${d.toFixed(1)}ms`);return d}catch(e){console.log(`âŒ ${n}: ${e.message}`)}};const c=`test_${Date.now()}`;const d='2024-01-15';const e=1;const a='/wp-json/appointease/v1';console.log('âš¡ Testing...\n');await t('Select',async()=>await fetch(`${a}/slots/select`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({date:d,time:'09:00',employee_id:e,client_id:c})}));for(let i=0;i<5;i++)await t(`Change${i+1}`,async()=>await fetch(`${a}/slots/select`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({date:d,time:`${9+Math.floor(i/6)}:${String((i%6)*10).padStart(2,'0')}`,employee_id:e,client_id:c})}));await t('Deselect',async()=>await fetch(`${a}/slots/deselect`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({date:d,time:'10:00',employee_id:e})}));const ds=m.map(x=>x.d).sort((a,b)=>a-b);const avg=ds.reduce((a,b)=>a+b,0)/ds.length;console.log(`\nðŸ“Š Avg: ${avg.toFixed(1)}ms | Min: ${ds[0].toFixed(1)}ms | Max: ${ds[ds.length-1].toFixed(1)}ms`);console.log(avg<10?'âœ… EXCELLENT':avg<50?'âš ï¸ GOOD':'âŒ SLOW');})();
