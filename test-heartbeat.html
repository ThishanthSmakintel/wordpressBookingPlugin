<!DOCTYPE html>
<html>
<head>
    <title>Heartbeat Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .status { margin: 20px 0; }
        .pass { color: green; }
        .fail { color: red; }
    </style>
</head>
<body>
    <h1>AppointEase Heartbeat Test</h1>
    <div id="results">Testing...</div>
    
    <script>
        async function testHeartbeat() {
            const resultsDiv = document.getElementById('results');
            
            try {
                const response = await fetch('/wp-json/appointease/v1/test-heartbeat');
                const data = await response.json();
                
                const allPass = data.class_exists && data.filter_registered;
                
                resultsDiv.innerHTML = `
                    <div class="status ${allPass ? 'pass' : 'fail'}">
                        <h2>${allPass ? '✅ Heartbeat Working' : '❌ Heartbeat Issues'}</h2>
                    </div>
                    <ul>
                        <li>Class Loaded: ${data.class_exists ? '✅' : '❌'}</li>
                        <li>Filter Hooked: ${data.filter_registered ? '✅' : '❌'}</li>
                        <li>Heartbeat Script: ${data.heartbeat_enabled ? '✅' : '❌'}</li>
                    </ul>
                    <details>
                        <summary>Raw Response</summary>
                        <pre>${JSON.stringify(data, null, 2)}</pre>
                    </details>
                `;
            } catch (error) {
                resultsDiv.innerHTML = `<p class="fail">❌ Error: ${error.message}</p>`;
            }
        }
        
        testHeartbeat();
    </script>
</body>
</html>
